<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>관리자 대시보드</title>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" />
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" th:href="@{/admin/dashboard/dashboard.css}" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script type="text/javascript">
$(function(){

});
</script>
</head>
<body class="admin-dashboard">
  <div id="header">
    <th:block th:replace="~{fragments/adminHeader :: adminHeader}"></th:block>
  </div>

  <div class="admin-layout">
    <!-- 왼쪽 사이드바 -->
    <aside class="admin-sidebar">
    	<th:block th:replace="~{fragments/adminSidebar :: adminSidebar}"></th:block>
    </aside>

    <main class="admin-content">
      <!-- 상단 section -->
      <section class="stat-grid">
      	<!-- 총 강사 수 -->
        <article class="stat-card">
          <div class="stat-header">
            <h2 class="stat-label">총 강사 수</h2>
            <a th:href="@{/admin/dashboard}"><span class="more-link">더보기</span></a>
          </div>
          <div class="stat-value" th:text="${instCnt}+'명'"></div>
        </article>
		<!-- 총 강의 수 -->
        <article class="stat-card">
          <div class="stat-header">
            <h2 class="stat-label">총 강의 수</h2>
            <a th:href="@{/admin/lecture/searchAllLect}"><span class="more-link">더보기</span></a>
          </div>
          <div class="stat-value" th:text="${lectCnt}+'개'"></div>
        </article>

		<!-- 총 수강생 수 -->
        <article class="stat-card">
          <div class="stat-header">
            <h2 class="stat-label">총 수강생 수</h2>
            <a th:href="@{/admin/dashboard}"><span class="more-link">더보기</span></a>
          </div>
          <div class="stat-value" th:text="${userCnt}+'명'"></div>
        </article>
        
		<!-- 강의 총 수익 -->
        <article class="stat-card">
          <div class="stat-header">
            <h2 class="stat-label">강의 총 수익</h2>
            <a th:href="@{/admin/payment/searchPayPriceSum}"><span class="more-link">더보기</span></a>
          </div>
          <div class="stat-value" th:text="${#numbers.formatInteger(totalProfit, 3, 'COMMA')}+'원'"></div>
        </article>
      </section>

      <section class="dashboard-panel" id="top-metrics">
        <div class="panel-header">
          <div>
            <h2>강의 수익</h2>
          </div>
        </div>

        <div class="panel-body panel-body--highlight">
          <div class="highlight-cards">
            <article class="stat-card highlight-card">
              <div class="stat-header">
                <div>
                  <p class="stat-label">최고 수익 강의</p>
                  <p class="highlight-name" th:text="${payList[0].lect_name}"></p>
                </div>
              </div>
              <div class="highlight-value" th:text="${#numbers.formatInteger(payList[0].estimated_profit, 3, 'COMMA')+'원'}"></div>
              <p class="highlight-meta" th:text="'총 수강생 ' + ${payList[0].user_count} + '명'"> </p>
            </article>

            <article class="stat-card highlight-card">
              <div class="stat-header">
                <div>
                  <p class="stat-label">최다 수강 과목</p>
                  <p class="highlight-name" th:text="${userList[0].lect_name}"></p>
                </div>
              </div>
              <!-- <div class="highlight-value" th:text="${topCourse.studentCount} + '명'">1,245명</div>
              <p class="highlight-meta" th:text="'강사: ' + ${topCourse.instructorName}">
                강사: 박유진
              </p> -->
            </article>
          </div>

            <table class="data-table">
              <thead>
                <tr>
                  <th>순위</th>
                  <th>이름</th>
                  <th>수익</th>
                  <th>수강생 수</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="pay , i : ${payList}">
                  <td th:text="${i.count}"></td>
                  <td th:text="${pay.lect_name}"></td>
                  <td th:text="${#numbers.formatInteger(pay.estimated_profit, 3, 'COMMA')}+'원'"></td>
                  <td th:text="${pay.user_count}"></td>
                </tr>
              </tbody>
            </table>
          </div>
	    </section>
	  </main>
     </div>
     
</body>
</html>
