<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>관리자 대시보드</title>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" />
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" th:href="@{/admin/dashboard/dashboard.css}" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script type="text/javascript">
$(function(){

});
</script>
</head>
<body class="admin-dashboard">
  <div id="header">
    <th:block th:replace="~{fragments/adminHeader :: adminHeader}"></th:block>
  </div>

  <div class="admin-layout">
    <!-- 왼쪽 사이드바 -->
    <aside class="admin-sidebar">
    	<th:block th:replace="~{fragments/adminSidebar :: adminSidebar}"></th:block>
    </aside>

    <main class="admin-content">
      <!-- 상단 section -->
      <section class="stat-grid">
      	<!-- 총 강사 수 -->
        <article class="stat-card">
          <div class="stat-header">
            <h2 class="stat-label">총 강사 수</h2>
          </div>
          <div class="stat-value" th:text="${instCnt}+'명'"></div>
        </article>
		<!-- 총 강의 수 -->
        <article class="stat-card">
          <div class="stat-header">
            <h2 class="stat-label">총 강의 수</h2>
          </div>
          <div class="stat-value" th:text="${lectCnt}+'개'"></div>
        </article>

		<!-- 총 수강생 수 -->
        <article class="stat-card">
          <div class="stat-header">
            <h2 class="stat-label">총 수강생 수</h2>
          </div>
          <div class="stat-value" th:text="${userCnt}+'명'"></div>
        </article>
        
		<!-- 강의 총 수익 -->
        <article class="stat-card">
          <div class="stat-header">
            <h2 class="stat-label">강의 총 수익</h2>
          </div>
          <div class="stat-value" th:text="${#numbers.formatInteger(totalProfit, 3, 'COMMA')}+'원'"></div>
        </article>
      </section>
	  
	  <!-- 하단 section -->
      <!-- <section class="dashboard-panel">
      	강의 수익 영역
        <div class="panel-header">
          <div>
            <h2>강의 수익</h2>
          </div>
          <div class="panel-controls">
            <select class="panel-select" onchange="">
              강사 select 해서 option에 생성 
              <th:block th:each="lectProfit:${lectProfitList}">
              <option th:value="${lectProfit.inst_name}" th:text="${lectProfit.inst_name}"></option>
            </select>
            강의 총 수익
            <div class="pill">
              <span class="pill-value" th:text="${totalProfit}+'원'"></span>
            </div>
            나의 수익
            <div class="pill">
              <span class="pill-value">0</span>
            </div>
            강사별 수익
            <div class="pill">
              <span class="pill-value">0</span>
            </div>
          </div>
        </div>

		초기 화면은 전체 강사를 날짜 순서대로 표시하고 추후에 option 선택되는거에 따라 바뀌게 설정
        <div class="panel-body">
          <div class="table-wrap">
            <table class="data-table">
              <thead>
                <tr>
                  <th scope="col">날짜</th>
                  <th scope="col">강의이름</th>
                  <th scope="col">강사</th>
                  <th scope="col">실제 수입</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="lectProfit:${lectProfitList}">
                  <td th:text="${#dates.format(lectProfit.time, 'yyyy-MM-dd')}"></td>
                  <td th:text="${lectProfit.lect_name}"></td>
                  <td th:text="${lectProfit.inst_name}"></td>
                  <td th:text="${lectProfit.inst_profit}"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        
      </section> -->

      <section class="dashboard-panel" id="top-metrics">
        <div class="panel-header">
          <div>
            <h2>강의 수익</h2>
          </div>
        </div>

        <div class="panel-body panel-body--highlight">
          <div class="highlight-cards">
            <article class="stat-card highlight-card">
              <div class="stat-header">
                <div>
                  <p class="stat-label">최고 수익 강의</p>
                  <p class="highlight-name" th:text="${payList[0].lect_name}"></p>
                </div>
              </div>
              <div class="highlight-value" th:text="${#numbers.formatInteger(payList[0].estimated_profit, 3, 'COMMA')+'원'}"></div>
              <p class="highlight-meta" th:text="'총 수강생 ' + ${payList[0].user_count} + '명'"> </p>
            </article>

            <article class="stat-card highlight-card">
              <div class="stat-header">
                <div>
                  <p class="stat-label">최다 수강 과목</p>
                  <p class="highlight-name" th:text="${userList[0].lect_name}"></p>
                </div>
              </div>
              <!-- <div class="highlight-value" th:text="${topCourse.studentCount} + '명'">1,245명</div>
              <p class="highlight-meta" th:text="'강사: ' + ${topCourse.instructorName}">
                강사: 박유진
              </p> -->
            </article>
          </div>

            <table class="data-table">
              <thead>
                <tr>
                  <th>순위</th>
                  <th>이름</th>
                  <th>구분</th>
                  <th>수강생 수</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="pay , i : ${payList}">
                  <td th:text="${i.count}"></td>
                  <td th:text="${pay.lect_name}"></td>
                  <td th:text="${#numbers.formatInteger(pay.estimated_profit, 3, 'COMMA')}+'원'"></td>
                  <td th:text="${pay.user_count}"></td>
                </tr>
              </tbody>
            </table>
          </div>
	    </section>
	  </main>
     </div>
     
</body>
</html>