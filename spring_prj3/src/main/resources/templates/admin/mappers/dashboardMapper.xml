<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.sist.admin.dashboard.AdminDashBoardMapper">

<select id="selectCountInst" resultType="int">
select count(*)
from instructor
</select>

<select id="selectCountLect" resultType="int">
select count(*)
from lecture
</select>

<select id="selectCountUser" resultType="int">
select count(*)
from users
</select>

<select id="selectAllProfit" resultType="int">
select sum(price * usercount)as all_profit
from lecture
</select>

<!-- 결제 완료 상태 db 가데이터가 없어서 임시로 결제 대기중 상태일때로 쿼리문 작성 -->
<select id="selectLectProfit" resultType="lectProfitDomain">
select p.time as time, l.name as lect_name, i.name as inst_name, p.price*0.967 as inst_profit
from payment p
join payment_detail pd
on p.payrec_id=pd.payrec_id
join payment_detail2 pd2
on pd.payrec_id=pd2.payrec_id
join lecture l
on l.lect_id=pd2.lect_id
join instructor i
on i.inst_id=l.inst_id
where p.state=1
</select>

</mapper>